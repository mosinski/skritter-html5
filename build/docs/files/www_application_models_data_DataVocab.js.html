<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>www/application/models/data/DataVocab.js - skritter-html5</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="skritter-html5"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.2632</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Analytics.html">Analytics</a></li>
            
                <li><a href="../classes/Api.html">Api</a></li>
            
                <li><a href="../classes/Application.html">Application</a></li>
            
                <li><a href="../classes/Assets.html">Assets</a></li>
            
                <li><a href="../classes/BaseApplication.html">BaseApplication</a></li>
            
                <li><a href="../classes/BaseCollection.html">BaseCollection</a></li>
            
                <li><a href="../classes/BaseModel.html">BaseModel</a></li>
            
                <li><a href="../classes/BasePage.html">BasePage</a></li>
            
                <li><a href="../classes/BaseRouter.html">BaseRouter</a></li>
            
                <li><a href="../classes/BaseView.html">BaseView</a></li>
            
                <li><a href="../classes/Bootstrap.html">Bootstrap</a></li>
            
                <li><a href="../classes/CanvasCharacter.html">CanvasCharacter</a></li>
            
                <li><a href="../classes/CanvasStroke.html">CanvasStroke</a></li>
            
                <li><a href="../classes/CharacterEditor.html">CharacterEditor</a></li>
            
                <li><a href="../classes/DataDecomp.html">DataDecomp</a></li>
            
                <li><a href="../classes/DataDecomps.html">DataDecomps</a></li>
            
                <li><a href="../classes/DataItem.html">DataItem</a></li>
            
                <li><a href="../classes/DataItems.html">DataItems</a></li>
            
                <li><a href="../classes/DataParam.html">DataParam</a></li>
            
                <li><a href="../classes/DataParams.html">DataParams</a></li>
            
                <li><a href="../classes/DataReview.html">DataReview</a></li>
            
                <li><a href="../classes/DataReviews.html">DataReviews</a></li>
            
                <li><a href="../classes/DataSentence.html">DataSentence</a></li>
            
                <li><a href="../classes/DataSentences.html">DataSentences</a></li>
            
                <li><a href="../classes/DataSRSConfig.html">DataSRSConfig</a></li>
            
                <li><a href="../classes/DataSRSConfigs.html">DataSRSConfigs</a></li>
            
                <li><a href="../classes/DataStroke.html">DataStroke</a></li>
            
                <li><a href="../classes/DataStrokes.html">DataStrokes</a></li>
            
                <li><a href="../classes/DataVocab.html">DataVocab</a></li>
            
                <li><a href="../classes/DataVocabList.html">DataVocabList</a></li>
            
                <li><a href="../classes/DataVocabLists.html">DataVocabLists</a></li>
            
                <li><a href="../classes/DataVocabs.html">DataVocabs</a></li>
            
                <li><a href="../classes/Dialogs.html">Dialogs</a></li>
            
                <li><a href="../classes/IndexedDBAdapter.html">IndexedDBAdapter</a></li>
            
                <li><a href="../classes/Kana.html">Kana</a></li>
            
                <li><a href="../classes/ListRowTable.html">ListRowTable</a></li>
            
                <li><a href="../classes/ListSectionTable.html">ListSectionTable</a></li>
            
                <li><a href="../classes/ListTable.html">ListTable</a></li>
            
                <li><a href="../classes/Mapper.html">Mapper</a></li>
            
                <li><a href="../classes/PageAccount.html">PageAccount</a></li>
            
                <li><a href="../classes/PageCreateAccount.html">PageCreateAccount</a></li>
            
                <li><a href="../classes/PageDashboard.html">PageDashboard</a></li>
            
                <li><a href="../classes/PageExport.html">PageExport</a></li>
            
                <li><a href="../classes/PageFilters.html">PageFilters</a></li>
            
                <li><a href="../classes/PageLanding.html">PageLanding</a></li>
            
                <li><a href="../classes/PageLanguageSelect.html">PageLanguageSelect</a></li>
            
                <li><a href="../classes/PageLearningCenter.html">PageLearningCenter</a></li>
            
                <li><a href="../classes/PageList.html">PageList</a></li>
            
                <li><a href="../classes/PageLists.html">PageLists</a></li>
            
                <li><a href="../classes/PageListSection.html">PageListSection</a></li>
            
                <li><a href="../classes/PageListSelect.html">PageListSelect</a></li>
            
                <li><a href="../classes/PageLogin.html">PageLogin</a></li>
            
                <li><a href="../classes/PageScratchpad.html">PageScratchpad</a></li>
            
                <li><a href="../classes/PageSettings.html">PageSettings</a></li>
            
                <li><a href="../classes/PageStats.html">PageStats</a></li>
            
                <li><a href="../classes/PageStrokeOrder.html">PageStrokeOrder</a></li>
            
                <li><a href="../classes/PageStudy.html">PageStudy</a></li>
            
                <li><a href="../classes/PageTests.html">PageTests</a></li>
            
                <li><a href="../classes/PageWords.html">PageWords</a></li>
            
                <li><a href="../classes/ParamEditor.html">ParamEditor</a></li>
            
                <li><a href="../classes/Params.html">Params</a></li>
            
                <li><a href="../classes/PinyinConverter.html">PinyinConverter</a></li>
            
                <li><a href="../classes/Prompt.html">Prompt</a></li>
            
                <li><a href="../classes/PromptCanvas.html">PromptCanvas</a></li>
            
                <li><a href="../classes/PromptController.html">PromptController</a></li>
            
                <li><a href="../classes/PromptDefn.html">PromptDefn</a></li>
            
                <li><a href="../classes/PromptGradingButtons.html">PromptGradingButtons</a></li>
            
                <li><a href="../classes/PromptRdng.html">PromptRdng</a></li>
            
                <li><a href="../classes/PromptRune.html">PromptRune</a></li>
            
                <li><a href="../classes/PromptTone.html">PromptTone</a></li>
            
                <li><a href="../classes/Recognizer.html">Recognizer</a></li>
            
                <li><a href="../classes/Router.html">Router</a></li>
            
                <li><a href="../classes/RouterAccountCreation.html">RouterAccountCreation</a></li>
            
                <li><a href="../classes/RouterAdmin.html">RouterAdmin</a></li>
            
                <li><a href="../classes/RouterLearningCenter.html">RouterLearningCenter</a></li>
            
                <li><a href="../classes/ScheduleItem.html">ScheduleItem</a></li>
            
                <li><a href="../classes/ScheduleItems.html">ScheduleItems</a></li>
            
                <li><a href="../classes/Shortstraw.html">Shortstraw</a></li>
            
                <li><a href="../classes/Sidebars.html">Sidebars</a></li>
            
                <li><a href="../classes/Strokes.html">Strokes</a></li>
            
                <li><a href="../classes/Timer.html">Timer</a></li>
            
                <li><a href="../classes/TimerStopwatch.html">TimerStopwatch</a></li>
            
                <li><a href="../classes/User.html">User</a></li>
            
                <li><a href="../classes/UserData.html">UserData</a></li>
            
                <li><a href="../classes/UserSettings.html">UserSettings</a></li>
            
                <li><a href="../classes/UserStats.html">UserStats</a></li>
            
                <li><a href="../classes/UserSubscription.html">UserSubscription</a></li>
            
                <li><a href="../classes/VocabTable.html">VocabTable</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Application.html">Application</a></li>
            
                <li><a href="../modules/Components.html">Components</a></li>
            
                <li><a href="../modules/Framework.html">Framework</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: www/application/models/data/DataVocab.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * @module Application
 */
define([
    &#x27;framework/BaseModel&#x27;
], function(BaseModel) {
    /**
     * @class DataVocab
     * @extends BaseModel
     */
    var DataVocab = BaseModel.extend({
        /**
         * @method initialize
         */
        initialize: function() {},
        /**
         * @property idAttribute
         * @type String
         */
        idAttribute: &#x27;id&#x27;,
        /**
         * @property defaults
         * @type Object
         */
        defaults: {},
        /**
         * @method cache
         * @param {Function} [callback]
         */
        cache: function(callback) {
            app.user.data.flagVocabUpdate(this.id);
            app.storage.putItems(&#x27;vocabs&#x27;, this.toJSON(), function() {
                if (typeof callback === &#x27;function&#x27;) {
                    callback();
                }
            });
        },
        /**
         * @method getAudio
         * @returns {Boolean|String}
         */
        getAudio: function() {
            if (this.has(&#x27;audio&#x27;)) {
                return app.isNative() ? this.get(&#x27;audio&#x27;).replace(&#x27;/sounds?file=&#x27;, &#x27;&#x27;) : this.get(&#x27;audio&#x27;);
            }
            return false;
        },
        /**
         * @method getCanvasCharacter
         * @returns {CanvasCharacter}
         */
        getCanvasCharacter: function() {
            return this.getStroke() ? this.getStroke().getCanvasCharacter() : undefined;
        },
        /**
         * @method getCharacterCount
         * @returns {Number}
         */
        getCharacterCount: function() {
            return this.getCharacters().length;
        },
        /**
         * @method getCharacters
         * @returns {Array}
         */
        getCharacters: function() {
            var characters = [];
            if (this.has(&#x27;containedVocabIds&#x27;)) {
                var containedVocabIds = this.get(&#x27;containedVocabIds&#x27;);
                for (var i = 0, length = containedVocabIds.length; i &lt; length; i++) {
                    if (this.isChinese()) {
                        characters.push(app.fn.mapper.fromBase(containedVocabIds[i]));
                    } else {
                        characters.push(containedVocabIds[i].split(&#x27;-&#x27;)[1]);
                    }
                }
            } else {
                characters.push(this.get(&#x27;writing&#x27;));
            }
            return characters;
        },
        /**
         * @method getContainedItemIds
         * @param {String} part
         * @param {Boolean} [excludeKana]
         * @returns {Array}
         */
        getContainedItemIds: function(part, excludeKana) {
            var containedItemIds = [];
            //creates an array of item items based on contained vocab ids
            if (this.has(&#x27;containedVocabIds&#x27;)) {
                var containedVocabIds = this.get(&#x27;containedVocabIds&#x27;);
                for (var i = 0, length = containedVocabIds.length; i &lt; length; i++) {
                    var containedVocabId = containedVocabIds[i];
                    var containedSplit = containedVocabId.split(&#x27;-&#x27;);
                    if (part === &#x27;rune&#x27;) {
                        containedItemIds.push(app.user.id + &#x27;-&#x27; + containedVocabId + &#x27;-&#x27; + part);
                    } else if (parseInt(containedSplit[2], 10) &gt; 1) {
                        containedItemIds.push(app.user.id + &#x27;-&#x27; + containedVocabId + &#x27;-&#x27; + part);
                    } else {
                        containedItemIds.push(app.user.id + &#x27;-&#x27; + containedSplit[0] + &#x27;-&#x27; + containedSplit[1] + &#x27;-0-&#x27; + part);
                    }
                }
            }
            //filters out kana that is included is a contained vocab id
            if (this.isJapanese() &amp;&amp; excludeKana) {
                containedItemIds = containedItemIds.filter(function(itemId) {
                    return !app.fn.isKana(itemId.split(&#x27;-&#x27;)[2]);
                });
            }
            return containedItemIds;
        },
        /**
         * @method getContainedRows
         * @returns {String}
         */
        getContainedRows: function() {
            var containedHTML = &#x27;&#x27;;
            var containedVocabs = _.without(this.getContainedVocabs(), undefined);
            containedHTML += &quot;&lt;table class=&#x27;table-contained&#x27;&gt;&lt;tbody&gt;&quot;;
            for (var a = 0, lengthA = containedVocabs.length; a &lt; lengthA; a++) {
                var vocabItem = containedVocabs[a];
                containedHTML += &quot;&lt;tr id=&#x27;writing-&quot; + vocabItem.get(&#x27;writing&#x27;) + &quot;&#x27;&gt;&quot;;
                containedHTML += &quot;&lt;td class=&#x27;writing asian-font&#x27;&gt;&quot; + vocabItem.get(&#x27;writing&#x27;) + &#x27;&lt;/td&gt;&#x27;;
                if (vocabItem.get(&#x27;kana&#x27;)) {
                    containedHTML += &quot;&lt;td class=&#x27;reading&#x27;&gt;&lt;/td&gt;&quot;;
                    containedHTML += &quot;&lt;td class=&#x27;definition&#x27;&gt;kana&lt;/td&gt;&quot;;
                } else {
                    containedHTML += &quot;&lt;td class=&#x27;reading&#x27;&gt;&quot; + vocabItem.getReading() + &#x27;&lt;/td&gt;&#x27;;
                    containedHTML += &quot;&lt;td class=&#x27;definition&#x27;&gt;&quot; + vocabItem.getDefinition() + &#x27;&lt;/td&gt;&#x27;;
                }
                containedHTML += &quot;&lt;/tr&gt;&quot;;
            }
            containedHTML += &quot;&lt;/tbody&gt;&lt;/table&gt;&quot;;
            return containedHTML;
        },
        /**
         * @method getContainedVocabIds
         * @param {Boolean} [excludeKana]
         * @returns {Array}
         */
        getContainedVocabIds: function(excludeKana) {
            var containedVocabIds = [];
            if (this.has(&#x27;containedVocabIds&#x27;)) {
                if (excludeKana) {
                    containedVocabIds = this.get(&#x27;containedVocabIds&#x27;).filter(function(vocabId) {
                        return !app.fn.isKana(vocabId.split(&#x27;-&#x27;)[1]);
                    });
                } else {
                    containedVocabIds = this.get(&#x27;containedVocabIds&#x27;);
                }
            }
            return containedVocabIds;
        },
        /**
         * @method getContainedVocabs
         * @returns {Array}
         */
        getContainedVocabs: function() {
            var vocabs = [];
            var containedIds = this.has(&#x27;containedVocabIds&#x27;) ? this.get(&#x27;containedVocabIds&#x27;) : [this.id];
            for (var i = 0, length = containedIds.length; i &lt; length; i++) {
                var vocab = this.collection.get(containedIds[i]);
                if (vocab) {
                    vocabs.push(this.collection.get(containedIds[i]));
                } else {
                    //create a temporary kana item when missing for collection
                    vocabs.push(app.user.data.vocabs.add(new DataVocab({
                        id: containedIds[i],
                        kana: true, writing: containedIds[i].split(&#x27;-&#x27;)[1]
                    }), {merge: true, silent: true}));
                }
            }
            return vocabs;
        },
        /**
         * @method getDecomp
         * @param {Boolean|DataDecomp}
         */
        getDecomp: function() {
            if (this.getCharacters().length === 1) {
                var decomp = app.user.data.decomps.get(this.getCharacters()[0]);
                if (decomp &amp;&amp; !decomp.get(&#x27;atomic&#x27;)) {
                    return decomp;
                }
            }
            return false;
        },
        /**
         * @method getDefinition
         * @param {Boolean} [skipFormat]
         * @returns {String}
         */
        getDefinition: function(skipFormat) {
            var customDefinition = this.get(&#x27;customDefinition&#x27;);
            var definition = this.get(&#x27;definitions&#x27;)[app.user.settings.get(&#x27;sourceLang&#x27;)];
            if (customDefinition &amp;&amp; customDefinition !== &#x27;&#x27;) {
                definition = this.get(&#x27;customDefinition&#x27;);
            } else if (definition) {
                definition = definition;
            } else {
                definition = this.get(&#x27;definitions&#x27;).en;
            }
            return skipFormat ? definition : app.fn.textToHTML(definition);
        },
        /**
         * @method getKana
         * @returns {Array}
         */
        getKana: function() {
            return _.without(this.get(&#x27;writing&#x27;).split(&#x27;&#x27;).map(function(value) {
                return app.fn.isKana(value) ? value : false;
            }), false);
        },
        /**
         * @method getMnemonicText
         * @returns {String}
         */
        getMnemonicText: function() {
            return app.fn.textToHTML(this.get(&#x27;mnemonic&#x27;) ? this.get(&#x27;mnemonic&#x27;).text : &#x27;&#x27;);
        },
        /**
         * @method getReading
         * @param {Number} [startFrom]
         * @param {Object} [options]
         * @returns {String}
         */
        getReading: function(startFrom, options) {
            var html = &#x27;&#x27;;
            var segment = &#x27;&#x27;;
            var position = 1;
            var fillers = [&quot; ... &quot;, &quot;&#x27;&quot;, &quot; &quot;];
            var segments = [];
            //TODO: fix for single character prompts with multiple readings
            startFrom = startFrom ? startFrom : false;
            options = options ? options : {};
            options.classes = Array.isArray(options.classes) ? options.classes : [options.classes];
            options.hide = options.hide ? options.hide : false;
            options.hideKana = options.hideKana ? options.hideKana : [];
            options.mask = options.mask ? options.mask : false;
            options.style = options.style === &#x27;zhuyin&#x27; ? true : false;
            if (!startFrom) {
               options.classes.push(&#x27;no-spacing&#x27;);
            }
            html += &quot;&lt;div class=&#x27;reading-block &quot; + options.classes.join(&#x27;&#x27;) + &quot;&#x27;&gt;&quot;;
            if (this.isChinese()) {
                segments = app.fn.segmentReading(this.get(&#x27;reading&#x27;));
                for (var a = 0, lengthA = segments.length; a &lt; lengthA; a++) {
                    segment = segments[a];
                    html += &quot;&lt;div class=&#x27;reading-&quot; + (a + 1) + &quot;&#x27;&gt;&quot;;
                    for (var b = 0, lengthB = segment.length; b &lt; lengthB; b++) {
                        var piece = segment[b];
                        if (fillers.indexOf(piece) === -1) {
                            var pieceMasked = piece.replace(/[1-5]/g, &#x27;&#x27;);
                            var pieceMaskedZhuyin = app.fn.pinyin.toZhuyin(pieceMasked + &#x27;5&#x27;);
                            var pieceTone = app.fn.pinyin.toTone(piece);
                            var pieceZhuyin = app.fn.pinyin.toZhuyin(piece);
                            pieceMasked = pieceMasked.replace(&#x27;lv&#x27;, &#x27;lü&#x27;);
                            pieceMaskedZhuyin = pieceMaskedZhuyin.replace(&#x27;˙&#x27;, &#x27;&#x27;);
                            if (!startFrom || startFrom &gt; position) {
                                if (!startFrom &amp;&amp; options.hide) {
                                    html += &quot;&lt;div class=&#x27;position-&quot; + position + &quot; reading-button&#x27;&gt;&lt;span&gt;&quot;;
                                    html += options.style ? pieceMaskedZhuyin : pieceMasked;
                                    html += &quot;&lt;/span&gt;&lt;/div&gt;&quot;;
                                } else {
                                    html += &quot;&lt;div class=&#x27;position-&quot; + position + &quot;&#x27;&gt;&quot;;
                                    html += options.style ? pieceZhuyin : pieceTone;
                                    html += &quot;&lt;/div&gt;&quot;;
                                }
                            } else {
                                if (options.hide) {
                                    html += &quot;&lt;div class=&#x27;position-&quot; + position + &quot; reading-button&#x27;&gt;&lt;span&gt;&quot;;
                                    html += options.style ? pieceMaskedZhuyin : pieceMasked;
                                    html += &quot;&lt;/span&gt;&lt;/div&gt;&quot;;
                                } else if (options.mask) {
                                    html += &quot;&lt;div class=&#x27;position-&quot; + position + &quot; reading-masked&#x27;&gt;&lt;span&gt;&quot;;
                                    html += options.style ? pieceMaskedZhuyin : pieceMasked;
                                    html += &quot;&lt;/span&gt;&lt;/div&gt;&quot;;
                                } else {
                                    html += &quot;&lt;div class=&#x27;position-&quot; + position + &quot; reading-hidden&#x27;&gt;&quot;;
                                    html += &quot;&lt;span&gt;&quot; + piece + &quot;&lt;/span&gt;&lt;/div&gt;&quot;;
                                }
                            }
                            position++;
                        } else {
                            html += &quot;&lt;span class=&#x27;reading-filler&#x27;&gt;&quot; + piece + &quot;&lt;/span&gt;&quot;;
                        }
                    }
                    if (a &lt; segments.length - 1) {
                        html += &quot;, &quot;;
                    }
                    html += &quot;&lt;/div&gt;&quot;;
                }
            } else {
                segments = this.get(&#x27;reading&#x27;).split(&#x27;&#x27;);
                html += &quot;&lt;div class=&#x27;reading-1&#x27;&gt;&quot;;
                for (var c = 0, lengthC = segments.length; c &lt; lengthC; c++) {
                    segment = segments[c];
                    if (options.hideKana.indexOf(segment) === -1) {
                        html += &quot;&lt;div class=&#x27;position-&quot; + position + (options.hide ? &#x27; reading-button&#x27; : &#x27;&#x27;) + &quot;&#x27;&gt;&lt;span&gt;&quot; + segment + &quot;&lt;/span&gt;&lt;/div&gt;&quot;;
                    } else {
                        html += &quot;&lt;div class=&#x27;position-&quot; + position + &quot;&#x27;&gt;&lt;span&gt; ー &lt;/span&gt;&lt;/div&gt;&quot;;
                    }
                    position++;
                }
                html += &quot;&lt;/div&gt;&quot;;
            }
            return html + &#x27;&lt;/div&gt;&#x27;;
        },
        /**
         * @method getStroke
         * @returns {DataStroke}
         */
        getStroke: function() {
            return app.user.data.strokes.get(this.get(&#x27;writing&#x27;));
        },
        /**
         * @method getStyle
         * @returns {String}
         */
        getStyle: function() {
            var activeStyles = app.user.settings.getActiveStyles();
            var style = this.get(&#x27;style&#x27;);
            if (style &amp;&amp; [&#x27;both&#x27;, &#x27;none&#x27;].indexOf(style) === -1 &amp;&amp;
                activeStyles.indexOf(&#x27;simp&#x27;) &gt; -1 &amp;&amp; activeStyles.indexOf(&#x27;trad&#x27;) &gt; -1) {
                return style;
            }
            return &#x27;&#x27;;
        },
        /**
         * @method getTones
         * @param {Number} position
         * @returns {Array}
         */
        getTones: function(position) {
            var tones = [];
            var reading = this.get(&#x27;reading&#x27;);
            if (this.isChinese()) {
                if (reading.indexOf(&#x27;, &#x27;) === -1) {
                    reading = reading.match(/[0-9]+/g);
                    for (var a = 0, lengthA = reading.length; a &lt; lengthA; a++) {
                        tones.push([parseInt(reading[a], 10)]);
                    }
                } else {
                    reading = reading.split(&#x27;, &#x27;);
                    for (var b = 0, lengthB = reading.length; b &lt; lengthB; b++) {
                        tones.push([app.fn.arrayToInt(reading[b].match(/[0-9]+/g))]);
                    }
                }
                return _.flatten(this.getCharacterCount() &gt; 1 ? tones[position - 1] : tones);
            }
            return tones;
        },
        /**
         * @method getWriting
         * @param {Number} [startFrom]
         * @param {Object} [options]
         * @returns {String}
         */
        getWriting: function(startFrom, options) {
            var html = &#x27;&#x27;;
            var position = 1;
            var allCharacters = this.get(&#x27;writing&#x27;).split(&#x27;&#x27;);
            var containedCharacters = this.getCharacters();
            options = options ? options : {};
            options.classes = Array.isArray(options.classes) ? options.classes : [options.classes];
            html += &quot;&lt;div class=&#x27;writing-block &quot; + options.classes + &quot;&#x27;&gt;&quot;;
            for (var i = 0, length = allCharacters.length; i &lt; length; i++) {
                var character = allCharacters[i];
                if (containedCharacters.indexOf(character) &gt; -1) {
                    if (!startFrom || startFrom &gt; position) {
                        html += &quot;&lt;span id=&#x27;writing-&quot; + position + &quot;&#x27;&gt;&quot; + character + &quot;&lt;/span&gt;&quot;;
                    } else {
                        html += &quot;&lt;span id=&#x27;writing-&quot; + position + &quot;&#x27; class=&#x27;writing-hidden&#x27;&gt;&quot;;
                        html += &quot;&lt;span&gt;&quot; + character + &quot;&lt;/span&gt;&lt;/span&gt;&quot;;
                    }
                    position++;
                } else {
                    html += &quot;&lt;span class=&#x27;writing-filler&#x27;&gt;&quot; + character + &quot;&lt;/span&gt;&quot;;
                }
            }
            return html + &#x27;&lt;/div&gt;&#x27;;
        },
        /**
         * @method isBanned
         * @returns {Boolean}
         */
        isBanned: function() {
            return this.get(&#x27;bannedParts&#x27;).length ? true : false;
        },
        /**
         * @method isChinese
         * @returns {Boolean}
         */
        isChinese: function() {
            return this.get(&#x27;lang&#x27;) === &#x27;zh&#x27;;
        },
        /**
         * @method isJapanese
         * @returns {Boolean}
         */
        isJapanese: function() {
            return this.get(&#x27;lang&#x27;) === &#x27;ja&#x27;;
        },
        /**
         * @method isStarred
         * @returns {Boolean}
         */
        isStarred: function() {
            return this.get(&#x27;starred&#x27;);
        },
        /**
         * @method playAudio
         * @returns {Boolean}
         */
        playAudio: function() {
            if (this.getAudio()) {
                app.assets.playAudio(this.getAudio());
                return true;
            }
            return false;
        }
    });

    return DataVocab;
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
